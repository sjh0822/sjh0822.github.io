<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://sjh0822.github.io</id>
    <title>Gridea</title>
    <updated>2021-03-01T08:28:19.952Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://sjh0822.github.io"/>
    <link rel="self" href="https://sjh0822.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://sjh0822.github.io/images/avatar.png</logo>
    <icon>https://sjh0822.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[æµ‹è¯•]]></title>
        <id>https://sjh0822.github.io/post/ce-shi/</id>
        <link href="https://sjh0822.github.io/post/ce-shi/">
        </link>
        <updated>2021-03-01T08:03:35.000Z</updated>
        <content type="html"><![CDATA[<h1 id="mybatisæ¡†æ¶åº”ç”¨">Mybatisæ¡†æ¶åº”ç”¨</h1>
<p>[TOC]</p>
<ul>
<li>
<p>å…ˆå¯¼å…¥Mybatiséœ€è¦çš„jaråŒ… æˆ–è€…ä½¿ç”¨ maven å·¥ç¨‹å¯¼å…¥ä¸‹é¢çš„ä¾èµ–</p>
</li>
<li>
<pre><code class="language-java">&lt;dependencies&gt;
       &lt;!--mybatisçš„ä¾èµ–--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
           &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
           &lt;version&gt;3.4.6&lt;/version&gt;
       &lt;/dependency&gt;
       &lt;!--msqlæ•°æ®åº“ä¾èµ–--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;mysql&lt;/groupId&gt;
           &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
           &lt;version&gt;5.1.47&lt;/version&gt;
       &lt;/dependency&gt;
       &lt;!--å•å…ƒæµ‹è¯•--&gt;
       &lt;dependency&gt;
           &lt;groupId&gt;junit&lt;/groupId&gt;
           &lt;artifactId&gt;junit&lt;/artifactId&gt;
           &lt;version&gt;4.0&lt;/version&gt;
           &lt;scope&gt;test&lt;/scope&gt;
       &lt;/dependency&gt;
   &lt;/dependencies&gt;
   &lt;!--æ‰«æ.xmlæ–‡ä»¶å’Œ.propertieså±æ€§æ–‡ä»¶--&gt;
   &lt;build&gt;
       &lt;resources&gt;
            &lt;resource&gt;
                 &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.properties&lt;/include&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
            &lt;/resource&gt;
           &lt;resource&gt;
               &lt;directory&gt;src/main/java&lt;/directory&gt;
               &lt;includes&gt;
                   &lt;include&gt;**/*.properties&lt;/include&gt;
                   &lt;include&gt;**/*.xml&lt;/include&gt;
               &lt;/includes&gt;
               &lt;filtering&gt;true&lt;/filtering&gt;
           &lt;/resource&gt;
       &lt;/resources&gt;
   &lt;/build&gt;
</code></pre>
</li>
</ul>
<h2 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h2>
<ul>
<li>
<p>â€‹		ç¼–å†™mybaitisçš„xmlæ–‡ä»¶</p>
</li>
<li>
<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;properties resource=&quot;Db.properties&quot;/&gt;
    &lt;environments default=&quot;default&quot;&gt;
        &lt;environment id=&quot;default&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--æ‰«æå™¨ç”¨äºæ‰«æä¸æ¥å£ç»‘å®šçš„xmlæ–‡ä»¶--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/shengjiahao/dao/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;

</code></pre>
</li>
</ul>
<h2 id="ç¬¬äºŒæ­¥">ç¬¬äºŒæ­¥</h2>
<ul>
<li>
<p>â€‹     ç¼–å†™å®ä½“ç±»</p>
</li>
<li>
<pre><code class="language-java">package com.shengjiahao.pojo;

public class User {
      private  int uid;
      private  String uname;
      private  String upwd;

        public User() {
        }



    public User(int uid, String uname, String upwd) {
        this.uid = uid;
        this.uname = uname;
        this.upwd = upwd;
    }

    public int getUid() {
        return uid;
    }

    public void setUid(int uid) {
        this.uid = uid;
    }

    public String getUname() {
        return uname;
    }

    public void setUname(String uname) {
        this.uname = uname;
    }

    public String getUpwd() {
        return upwd;
    }

    public void setUpwd(String upwd) {
        this.upwd = upwd;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;uid=&quot; + uid +
                &quot;, uname='&quot; + uname + '\'' +
                &quot;, upwd='&quot; + upwd + '\'' +
                '}';
    }
}
</code></pre>
<h2 id="ç¬¬ä¸‰æ­¥-è‡ªå®šä¹‰sqlsession-å·¥å…·ç±»-è·å–sqlsessionå¯¹è±¡">ç¬¬ä¸‰æ­¥ è‡ªå®šä¹‰Sqlsession å·¥å…·ç±» è·å–Sqlsessionå¯¹è±¡<img src="" alt="" loading="lazy"></h2>
</li>
</ul>
<pre><code class="language-java"> * SqlSession å·¥å…·ç±»
 */
public class MybatisUtil {

    private static SqlSessionFactory sqlSessionFactory;
    //å½“ç±»å¯åŠ¨æ—¶åŠ è½½è¿™æ®µä»£ç 
    static {
        try {
            String resource= &quot;Mybatis.xml&quot;;
            InputStream  inputStream = Resources.getResourceAsStream(resource);
            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
	
    public static SqlSession getsqlsession()
    {
        return sqlSessionFactory.openSession();
    }
}

</code></pre>
<h2 id="ç¬¬å››æ­¥-ä½¿ç”¨æ¥å£ç»‘å®š">ç¬¬å››æ­¥ ä½¿ç”¨æ¥å£ç»‘å®š</h2>
<ul>
<li>
<p>åˆ›å»ºçš„ æ¥å£å ä¸ å®ç°çš„.xml æ–‡ä»¶åä¸€è‡´ å¹¶ä¸”ä½¿å…¶åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</p>
</li>
<li>
<p>å…¶ä¸­xmlä¸­ mapper æ ‡ç­¾ä¸­çš„ namespaceå±æ€§æŒ‡å‘æ¥å£çš„å…¨è·¯å¾„</p>
</li>
<li>
<p>æ³¨æ„ç‚¹</p>
<ul>
<li>æ¥å£çš„æ–¹æ³•åä¸mapperæ–‡ä»¶é‡Œçš„æ ‡ç­¾idç›¸åŒ</li>
<li>å‚æ•°ä¸parameterTypeçš„å‚æ•°ç›¸åŒ</li>
<li>è¿”å›å€¼æ¥å£çš„è¿”å›å€¼ç›¸åŒ</li>
</ul>
</li>
<li>
<p>æ¥å£å®ç°</p>
</li>
<li>
<pre><code class="language-java">import com.shengjiahao.pojo.User;

import java.util.List;

public interface UserMapper {
    /***
     * æŸ¥å…¨éƒ¨
     */
     List&lt;User&gt; selectAll();
    /**
     * åˆ é™¤
     */
    int deleteById(int uid);

    /**
     * æŸ¥çœ‹ä¸ªäºº
     */
     User selectById(int uid);
    /**
     * ä¿®æ”¹
     */
     int updateById(User user);
    /***
     * æ–°å¢
     */
     int AddUser(User user);
}
</code></pre>
</li>
<li>
<p>mapper.xmlæ–‡ä»¶å®ç°</p>
</li>
<li>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.shengjiahao.dao.UserMapper&quot;&gt;

     &lt;!--æŸ¥è¯¢å…¨éƒ¨--&gt;
     &lt;select id=&quot;selectAll&quot; resultType=&quot;com.shengjiahao.pojo.User&quot;&gt;
         select * from mvc.user
     &lt;/select&gt;
    &lt;!--æ–°å¢--&gt;
     &lt;insert id=&quot;AddUser&quot;  parameterType=&quot;com.shengjiahao.pojo.User&quot;&gt;
         insert into mvc.user values(null,#{uname},#{upwd})
     &lt;/insert&gt;
    &lt;!--åˆ é™¤--&gt;
     &lt;delete id=&quot;deleteById&quot; parameterType=&quot;int&quot;&gt;
          delete  from USER where uid=#{uid}
     &lt;/delete&gt;

    &lt;!--ä¿®æ”¹--&gt;
    &lt;update id=&quot;updateById&quot;  parameterType=&quot;com.shengjiahao.pojo.User&quot; &gt;
          update User set uname=#{uname},upwd=#{upwd} where uid=#{uid}
    &lt;/update&gt;

    &lt;select id=&quot;selectById&quot; resultType=&quot;com.shengjiahao.pojo.User&quot; parameterType=&quot;int&quot;&gt;
         select * from USER  where uid=#{uid}
    &lt;/select&gt;


</code></pre>
<h2 id="ç¬¬äº”æ­¥-æµ‹è¯•">ç¬¬äº”æ­¥ æµ‹è¯•</h2>
</li>
<li>
<p>ä½¿ç”¨è‡ªå®šä¹‰çš„Sqlsessionå·¥å…·ç´¯è·å– Sqlsessionå¯¹è±¡</p>
</li>
<li>
<p>åœ¨è°ƒç”¨ Sqlsessionä¸‹çš„getMapper()æ–¹æ³•  å‚æ•°æ˜¯ æ¥å£çš„çš„åå°„.class</p>
</li>
<li>
<p>æ³¨æ„ç‚¹ mybatis.xml çš„æ•°æ®æäº¤æ—¶JDBC åœ¨æµ‹è¯•çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨æäº¤  sqlsession.commit();</p>
</li>
<li>
<pre><code class="language-java">package com.shengjia.test;

import com.shengjiahao.Util.MybatisUtil;
import com.shengjiahao.dao.UserMapper;
import com.shengjiahao.pojo.User;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

public class Test {
    public static void main(String[] args) {
        SqlSession sqlsession = MybatisUtil.getsqlsession();
        UserMapper mapper = sqlsession.getMapper(UserMapper.class);

        User user = new User(4,&quot;å¼ ä¸‰&quot;,&quot;zs&quot;);
        int i = mapper.updateById(user);
        System.out.println(i);
        sqlsession.commit();

    }
}
</code></pre>
</li>
</ul>
<h2 id="é…ç½®mybatisxmlæ–‡ä»¶å±æ€§">é…ç½®Mybatis.xmlæ–‡ä»¶å±æ€§</h2>
<ol>
<li>
<p>å¤–éƒ¨å¼•å…¥.propertiesé…ç½®æ–‡ä»¶</p>
</li>
<li>
<pre><code class="language-java">&lt;properties resource=&quot;Db.properties&quot;/&gt;

ä¹Ÿå¯ä»¥å†…éƒ¨è‡ªå®šä¹‰å±æ€§

&lt;properties&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;123&quot;/&gt;
&lt;/properties&gt;
</code></pre>
</li>
</ol>
<p>â€‹     ç¼–å†™ .properties æ–‡ä»¶</p>
<pre><code class="language-java">driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:3306/mvc?useSSL=true&amp;amp;useUnicode=true&amp;amp;charsetEncoding=UTF-8
username=root
password=123
</code></pre>
<p>åœ¨ mybatis.xml ä¸­å¼•ç”¨æ–‡ä»¶å†…çš„å±æ€§</p>
<pre><code class="language-java">&lt;configuration&gt;
    &lt;properties resource=&quot;Db.properties&quot;/&gt;
    &lt;environments default=&quot;default&quot;&gt;
        &lt;environment id=&quot;default&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/shengjiahao/dao/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<h3 id="1åˆ«åtypealiases">1.(åˆ«å)typeAliases</h3>
<p>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹å‘½åä¸€ä¸ªçŸ­çš„åå­—ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³, åªç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å¤šä½™éƒ¨åˆ†ã€‚</p>
<p>type:æŒ‡å®šéœ€è¦ç”Ÿæˆåˆ«åçš„å®ä½“ç±»</p>
<p>aliasï¼šè¯¥ç±»ç”Ÿæˆçš„åˆ«å</p>
<pre><code class="language-java">&lt;typeAliases&gt;
  &lt;typeAlias alias=&quot;Author&quot; type=&quot;domain.blog.Author&quot;/&gt;
  &lt;typeAlias alias=&quot;Blog&quot; type=&quot;domain.blog.Blog&quot;/&gt;
  &lt;typeAlias alias=&quot;Comment&quot; type=&quot;domain.blog.Comment&quot;/&gt;
  &lt;typeAlias alias=&quot;Post&quot; type=&quot;domain.blog.Post&quot;/&gt;
  &lt;typeAlias alias=&quot;Section&quot; type=&quot;domain.blog.Section&quot;/&gt;
  &lt;typeAlias alias=&quot;Tag&quot; type=&quot;domain.blog.Tag&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>è‡ªåŠ¨æ‰«æ å®ä½“ç±» å¹¶é»˜è®¤ç”Ÿæˆ ç±»çš„åˆ«å</p>
<p>package:æŒ‡å®šéœ€è¦æ‰«æå®ä½“ç±»åŒ…çš„æ‰€åœ¨ä½ç½®</p>
<pre><code class="language-java">&lt;typeAliases&gt;
  &lt;package name=&quot;domain.blog&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<h3 id="2æ˜ å°„å™¨mapper">2.æ˜ å°„å™¨(Mapper)</h3>
<p><strong>æ–¹å¼ä¸€ ä½¿ç”¨ mapper.xml æ–‡ä»¶ç»‘å®šæ–¹å¼ resource=â€œ.xmlæ–‡ä»¶è·¯å¾„â€</strong></p>
<pre><code class="language-java">&lt;mappers&gt;
        &lt;mapper resource=&quot;com/shengjiahao/dao/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p><strong>æ–¹å¼äºŒ  ä½¿ç”¨ç›´æ¥ç»‘å®šæ¥å£çš„æ–¹å¼   class=â€æŒ‡å®šæ¥å£æ–‡ä»¶çš„è·¯å¾„â€œ</strong></p>
<pre><code class="language-xml">&lt;mappers&gt;
        &lt;mapper class=&quot;com.shengjiahao.dao.UserMapper&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p><strong>æ–¹å¼ä¸‰</strong>  <strong>ä½¿ç”¨ package å±æ€§</strong> <strong>æ‰«ææ•´ä¸ªæ–‡ä»¶</strong></p>
<pre><code class="language-.xml">  &lt;mappers&gt;
          &lt;package name=&quot;com.shengjiahao.dao&quot;/&gt;
  &lt;/mappers&gt;
</code></pre>
<h2 id="ç»“æœé›†æ˜ å°„resultmap">ç»“æœé›†æ˜ å°„ï¼ˆresultMapï¼‰</h2>
<ul>
<li>
<p>ä¸»è¦è§£å†³ å®ä½“ç±»å­—æ®µåå’Œæ•°æ®åº“çš„åˆ—åä¸ä¸€è‡´æ—¶</p>
</li>
<li>
<pre><code class="language-java">å®ä½“ç±»å­—æ®µ  id uname password
æ•°æ®åº“å¯¹åº”åˆ— id uname upwd
</code></pre>
<p><strong>resultMap</strong></p>
<pre><code class="language-xml">&lt;select id=&quot;selectAll&quot; resultMap=&quot;UserMap&quot;&gt;
         select * from mvc.user
&lt;/select&gt;
     &lt;resultMap id=&quot;UserMap&quot; type=&quot;user&quot;&gt;
          &lt;id property=&quot;id&quot; column=&quot;id&quot;&gt;&lt;/id&gt;
          &lt;result property=&quot;uname&quot; column=&quot;uname&quot;&gt;&lt;/result&gt;
          &lt;result property=&quot;password&quot; column=&quot;upwd&quot;&gt;&lt;/result&gt;
     &lt;/resultMap&gt;
</code></pre>
</li>
</ul>
<p>â€‹       æ•°æ®åº“æŸ¥è¯¢æ ‡ç­¾çš„  <strong>resultMapçš„å€¼</strong>  æŒ‡å‘  **resultMapæ ‡ç­¾ä¸­çš„id **</p>
<p>â€‹       <strong>type</strong>å±æ€§å³ä¸ºè¿”å›ç±»å‹   <strong>property:å®ä½“ç±»å±æ€§çš„åå­—</strong>   <strong>column æ•°æ®åº“å¯¹åº”çš„åˆ—</strong></p>
<p>â€‹</p>
<h2 id="æ—¥å¿—-å®ç°-settings">æ—¥å¿— å®ç° ï¼ˆsettingsï¼‰</h2>
<ul>
<li>
<p>mybaitisæ ‡å‡†çš„æ—¥å¿—å®ç°</p>
</li>
<li>
<pre><code class="language-xml">&lt;settings&gt;
       &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
   &lt;/settings&gt;
</code></pre>
</li>
<li>
<figure data-type="image" tabindex="1"><img src="C:%5CUsers%5C18472%5CDesktop%5Ctempsnip.png" alt="tempsnip" loading="lazy"></figure>
</li>
</ul>
<h3 id="log4g">LOG4G</h3>
<ul>
<li>
<p><strong>settingså±æ€§çš„é…ç½®</strong></p>
</li>
<li>
<pre><code class="language-xml">&lt;settings&gt;
       &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;
 &lt;/settings&gt;
</code></pre>
</li>
<li></li>
<li>
<p>â€‹	<strong>å¯¼å…¥ log4j çš„jaråŒ…</strong></p>
<pre><code class="language-xml">&lt;dependency&gt;
            &lt;groupId&gt;log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j&lt;/artifactId&gt;
            &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p><strong>ç¼–å†™ log4j.propertiesæ–‡ä»¶</strong></p>
</li>
<li>
<pre><code class="language-html">log4j.rootLogger=DEBUG, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%C %m %L %n
</code></pre>
</li>
<li></li>
</ul>
<h2 id="myabtisåˆ†é¡µ">Myabtisåˆ†é¡µ</h2>
<ul>
<li>
<pre><code class="language-xml">&lt;select id=&quot;selectLImit&quot; resultMap=&quot;UserMap&quot;  parameterType=&quot;map&quot;&gt;
         select * from mvc.user  limit #{startIndex},#{PageSize}
    &lt;/select&gt;
</code></pre>
</li>
<li>
<p>æµ‹è¯•</p>
</li>
<li>
<pre><code class="language-java">ublic class Test {
    public static void main(String[] args) {
        SqlSession sqlsession = MybatisUtil.getSqlsession();
        UserMapper mapper = sqlsession.getMapper(UserMapper.class);
        Map&lt;String,Integer&gt; map = new HashMap&lt;String, Integer&gt;();
        map.put(&quot;startIndex&quot;,1);
        map.put(&quot;PageSize&quot;,2);
        List&lt;User&gt; users = mapper.selectLImit(map);
        for (User user : users) {
            System.out.println(user);
        }


    }
}
</code></pre>
</li>
</ul>
<h2 id="crud-annotation">CRUD Annotation</h2>
<p>â€‹		<strong>ä»£ç </strong></p>
<pre><code class="language-java"> /***
     * æŸ¥å…¨éƒ¨
     */
     @Select(&quot;select * from User&quot;)
     List&lt;User&gt; selectAll();
    /**
     * åˆ é™¤
     */
    @Delete(&quot;delete from User where uid=#{uid}&quot;)
    int deleteById(int uid);

    /**
     * æŸ¥çœ‹ä¸ªäºº
     */
     @Select(&quot;select * from User where uid=#{uid}&quot;)
     User selectById(int uid);
    /**
     * ä¿®æ”¹
     */
     @Update(&quot;update user set uname=#{uname},upwd=#{upwd} where uid=#{uid}&quot;)
     int updateById(User user);
    /***
     * æ–°å¢
     */
     @Insert(&quot;insert into user values(null,#{uname},#{upwd})&quot;)
     int AddUser(User user);
</code></pre>
<h2 id="å¤šå¯¹ä¸€-æ¡ˆä¾‹å¤šä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªè€å¸ˆ">å¤šå¯¹ä¸€ æ¡ˆä¾‹ï¼ˆå¤šä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªè€å¸ˆï¼‰</h2>
<h3 id="æ•°æ®åº“ä»£ç ">æ•°æ®åº“ä»£ç </h3>
<pre><code class="language-sql">CREATE TABLE Student(
	sid INT PRIMARY KEY AUTO_INCREMENT,
	sname NVARCHAR(20),
	tid INT

)
CREATE TABLE teacher(
	tid INT PRIMARY KEY AUTO_INCREMENT,
	tname NVARCHAR(20)
)
INSERT INTO Student VALUES(NULL,'ç››ä½³è±ª',1);
INSERT INTO Student VALUES(NULL,'æ¨å…‹',2);
INSERT INTO Student VALUES(NULL,'å‘¨è±ª',1);
INSERT INTO Student VALUES(NULL,'æ±ªæ¶µ',2);

INSERT INTO teacher VALUES(NULL,'ç§¦è€å¸ˆ');
INSERT INTO teacher VALUES(NULL,'ç‹è€å¸ˆ');
</code></pre>
<h3 id="ä»£ç mapperåµŒå¥—å¼æŸ¥è¯¢">.ä»£ç Mapperï¼ˆåµŒå¥—å¼æŸ¥è¯¢ï¼‰</h3>
<pre><code class="language-xml"> //ä½¿ç”¨resultMapè¿›è¡Œç»“æœæ˜ å°„
        &lt;select id=&quot;getStudentList&quot; resultMap=&quot;StudentAndTeacher&quot;&gt;
             select * from student
        &lt;/select&gt;
        &lt;resultMap id=&quot;StudentAndTeacher&quot; type=&quot;Student&quot;&gt;
               &lt;result property=&quot;sid&quot; column=&quot;sid&quot;&gt;&lt;/result&gt;
               &lt;result property=&quot;sname&quot; column=&quot;sname&quot;&gt;&lt;/result&gt;
                //å¯¹è±¡ç±»å‹ä½¿ç”¨association å®ä½“ç±»å­—æ®µå property  columnå¯¹åº”æ•°æ®çš„åˆ— javaTypeæŒ‡å®šç±»å‹ select å¼•ç”¨åµŒå¥—çš„æŸ¥è¯¢è¯­å¥
               &lt;association property=&quot;teacher&quot; column=&quot;tid&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt;
        &lt;/resultMap&gt;

        &lt;select id=&quot;getTeacher&quot; resultType=&quot;Teacher&quot;&gt;
             select * from teacher where tid=#{tid}
        &lt;/select&gt;
</code></pre>
<h3 id="ä»£ç 2mapperåŒ…å«å¼æŸ¥è¯¢">ä»£ç 2Mapperï¼ˆåŒ…å«å¼æŸ¥è¯¢ï¼‰</h3>
<pre><code class="language-xml">&lt;select id=&quot;getStudentList&quot; resultMap=&quot;StudentAndTeacher&quot;&gt;
             select * from student s inner join teacher t on t.tid = s.tid
        &lt;/select&gt;
        &lt;resultMap id=&quot;StudentAndTeacher&quot; type=&quot;Student&quot;&gt;
                &lt;result property=&quot;sid&quot; column=&quot;sid&quot;&gt;&lt;/result&gt;
                &lt;result property=&quot;sname&quot; column=&quot;sname&quot;&gt;&lt;/result&gt;
                 //å±æ€§æ˜¯å¯¹è±¡ç±»å‹
                &lt;association property=&quot;teacher&quot; javaType=&quot;Teacher&quot;&gt;
                        &lt;result property=&quot;tid&quot; column=&quot;tid&quot;&gt;&lt;/result&gt;
                        &lt;result property=&quot;tname&quot; column=&quot;tname&quot;&gt;&lt;/result&gt;
                &lt;/association&gt;
        &lt;/resultMap&gt;
</code></pre>
<h2 id="ä¸€å¯¹å¤šä¸€ä¸ªè€å¸ˆåŒ…å«å¤šä¸ªå­¦ç”Ÿ">ä¸€å¯¹å¤šï¼ˆä¸€ä¸ªè€å¸ˆåŒ…å«å¤šä¸ªå­¦ç”Ÿï¼‰</h2>
<h3 id="å®ä½“ç±»">å®ä½“ç±»</h3>
<pre><code class="language-java">public class Teacher {
     private  int tid;
     private String tname;
     private List&lt;Student&gt; students;
}

</code></pre>
<pre><code class="language-java">public class Student {
     private  int sid;
     private  String sname;
     private  int tid;
}

</code></pre>
<h3 id="åŒ…å«å¼æŸ¥è¯¢-é›†åˆç±»å‹ä½¿ç”¨collection">åŒ…å«å¼æŸ¥è¯¢ é›†åˆç±»å‹ä½¿ç”¨ï¼ˆcollectionï¼‰</h3>
<pre><code class="language-java"> &lt;!--æŒ‡å®šä¸€ä¸ªè€å¸ˆæŸ¥å‡ºæ‰€æœ‰åŒ…å«çš„å­¦ç”Ÿ-åŒ…å«å¼æŸ¥è¯¢
 &lt;select id=&quot;getTeacherList&quot; resultMap=&quot;TeacherAndStudnt&quot; parameterType=&quot;_int&quot;&gt;
     select * from teacher t inner join student s on t.tid = s.tid
 &lt;/select&gt;

&lt;resultMap id=&quot;TeacherAndStudnt&quot; type=&quot;Teacher&quot;&gt;
        &lt;result property=&quot;tid&quot; column=&quot;tid&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;tname&quot; column=&quot;tname&quot;&gt;&lt;/result&gt;
		//ofType æŒ‡å®šè¯¥ç±»å‹çš„æ³›å‹ç±»å‹
        &lt;collection property=&quot;students&quot; ofType=&quot;Student&quot;&gt;
                &lt;result property=&quot;sid&quot; column=&quot;sid&quot;&gt;&lt;/result&gt;
                &lt;result property=&quot;sname&quot; column=&quot;sname&quot;&gt;&lt;/result&gt;
                &lt;result property=&quot;tid&quot; column=&quot;tid&quot;&gt;&lt;/result&gt;
        &lt;/collection&gt;
&lt;/resultMap&gt;
</code></pre>
<h3 id="åµŒå¥—å¼æŸ¥è¯¢">åµŒå¥—å¼æŸ¥è¯¢</h3>
<pre><code class="language-xml"> &lt;!--åµŒå¥—å­æŸ¥è¯¢--&gt;
       &lt;select id=&quot;getTeacherList2&quot; resultMap=&quot;TeacherAndStudnt&quot;&gt;
             select * from teacher where tid=#{tid}
       &lt;/select&gt;
       &lt;resultMap id=&quot;TeacherAndStudnt&quot; type=&quot;Teacher&quot;&gt;
             &lt;result property=&quot;tid&quot; column=&quot;tid&quot;&gt;&lt;/result&gt;
             &lt;result property=&quot;tname&quot; column=&quot;tname&quot;&gt;&lt;/result&gt;
              //
             &lt;collection property=&quot;students&quot; javaType=&quot;ArrayList&quot; ofType=&quot;Student&quot; 			select=&quot;getStudent&quot; column=&quot;tid&quot;/&gt;
       &lt;/resultMap&gt;
       &lt;select id=&quot;getStudent&quot; resultType=&quot;Student&quot;&gt;
            select * from student where tid =#{tid}
       &lt;/select&gt;
</code></pre>
<h3 id=""></h3>
<p>æ€»ç»“</p>
<ul>
<li>
<p>å±æ€§æ˜¯å¯¹è±¡ç±»å‹<strong>association</strong>   å±æ€§æ˜¯é›†åˆç±»å‹<strong>collection</strong></p>
</li>
<li>
<p>JavaTypeå€¼å¾—æ˜¯Javaçš„ç±»å‹ &amp;&amp; oftypeåªå¾—æ˜¯listæˆ–é›†åˆä¸­çš„æ³›å‹</p>
</li>
</ul>
<h2 id="åŠ¨æ€sql-æ ‡ç­¾">åŠ¨æ€Sql æ ‡ç­¾</h2>
<h3 id="ifæ ‡ç­¾">ifæ ‡ç­¾</h3>
<ul>
<li>æ³¨æ„sql è¯­å¥çš„æ‹¼æ¥ where 1=1</li>
</ul>
<pre><code class="language-xml"> &lt;select id=&quot;selectSexAndDname&quot; resultType=&quot;Emps&quot; parameterType=&quot;map&quot;&gt;
             select * from emps where 1=1
             &lt;if test=&quot;sex !=null&quot;&gt;
                 and sex=#{sex}
             &lt;/if&gt;
             &lt;if test=&quot;dname!=null&quot;&gt;
                and dname=#{dname}
             &lt;/if&gt;
        &lt;/select&gt;
</code></pre>
<h3 id="whereæ ‡ç­¾-ä¸if-æ ‡ç­¾-é…åˆä½¿ç”¨">whereæ ‡ç­¾ ä¸if æ ‡ç­¾ é…åˆä½¿ç”¨</h3>
<ul>
<li>ä¼šè‡ªåŠ¨è§£ææ‰ç¬¬ä¸€ä¸ªæ¡ä»¶çš„ and å…³é”®å­—</li>
</ul>
<pre><code class="language-xml">  &lt;select id=&quot;selectSexAndDname&quot; resultType=&quot;Emps&quot; parameterType=&quot;map&quot;&gt;
             select * from emps
             &lt;where&gt;
             &lt;if test=&quot;sex !=null&quot;&gt;
                 and sex=#{sex}
             &lt;/if&gt;
             &lt;if test=&quot;dname!=null&quot;&gt;
                and dname=#{dname}
             &lt;/if&gt;
             &lt;/where&gt;
        &lt;/select&gt;

</code></pre>
<h3 id="choose-when-æ ‡ç­¾-ä¸javaä¸­-switch-ç›¸ä¼¼-æ»¡è¶³çº¦å®šæ¡ä»¶æ—¶æ‰§è¡Œ">choose when æ ‡ç­¾ ä¸Javaä¸­ switch ç›¸ä¼¼ æ»¡è¶³çº¦å®šæ¡ä»¶æ—¶æ‰§è¡Œ</h3>
<pre><code class="language-xml"> &lt;select id=&quot;selectChoose&quot; resultType=&quot;Emps&quot; parameterType=&quot;map&quot;&gt;
             select * from emps
             &lt;where&gt;
                 &lt;choose&gt;
                     &lt;when test=&quot;sex!=null&quot;&gt;sex=#{sex}&lt;/when&gt;
                     &lt;when test=&quot;dname!=null&quot;&gt; and dname=#{dname}&lt;/when&gt;
                     &lt;otherwise&gt;
                           and 1=1;
                     &lt;/otherwise&gt;
                 &lt;/choose&gt;
             &lt;/where&gt;
        &lt;/select&gt;
</code></pre>
<h3 id="set-æ ‡ç­¾-ç”¨äºä¿®æ”¹è¯­å¥-ä¼šè‡ªåŠ¨è§£æ-é€—å·">set æ ‡ç­¾ ç”¨äºä¿®æ”¹è¯­å¥ ä¼šè‡ªåŠ¨è§£æ é€—å·</h3>
<pre><code class="language-xml">&lt;update id=&quot;UpdateEmps&quot; parameterType=&quot;map&quot;&gt;
           update emps
           &lt;set&gt;
               &lt;if test=&quot;sex!=null&quot;&gt;sex=#{sex},&lt;/if&gt;
               &lt;if test=&quot;ename!=null&quot;&gt;ename=#{ename}&lt;/if&gt;
           &lt;/set&gt;
           where  eid=#{eid}
       &lt;/update&gt;
</code></pre>
<h3 id="foreach-å¾ªç¯æ ‡ç­¾-æ‰¹é‡æŸ¥è¯¢">ForEach å¾ªç¯æ ‡ç­¾ æ‰¹é‡æŸ¥è¯¢</h3>
<ul>
<li>
<p><strong>å‚æ•°ä¸ºæ•°ç»„</strong></p>
</li>
<li>
<pre><code class="language-xml">&lt;select id=&quot;selectArray&quot; resultType=&quot;Emps&quot; parameterType=&quot;int[]&quot;&gt;
           select * from emps
           &lt;where&gt;
               &lt;if test=&quot;array!=null and array.length&gt;0&quot;&gt;
                    &lt;foreach collection=&quot;array&quot; item=&quot;eid&quot; close=&quot;)&quot; separator=&quot;,&quot; open=&quot; eid in(&quot;&gt;
                        #{eid}
                    &lt;/foreach&gt;
               &lt;/if&gt;
           &lt;/where&gt;
       &lt;/select&gt;
</code></pre>
</li>
<li>
<p><strong>å‚æ•°ä¸ºé›†åˆ</strong></p>
</li>
<li>
<pre><code class="language-xml">&lt;select id=&quot;selectList&quot; resultType=&quot;Emps&quot; parameterType=&quot;list&quot;&gt;
           select * from emps
           &lt;where&gt;
               &lt;if test=&quot;list!=null and list.size&gt;0&quot;&gt;
                    &lt;foreach collection=&quot;list&quot; open=&quot; eid in(&quot; separator=&quot;,&quot; close=&quot;)&quot; item=&quot;eid&quot;&gt;
                       #{eid}
                    &lt;/foreach&gt;
               &lt;/if&gt;
           &lt;/where&gt;
      &lt;/select&gt;
</code></pre>
</li>
<li></li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://sjh0822.github.io/post/hello-gridea/</id>
        <link href="https://sjh0822.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>